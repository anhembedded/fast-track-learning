<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dev Unit Test Wiki</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/feather-icons"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <i data-feather="box"></i>
                <h1>Dev Unit Test Wiki</h1>
            </div>
            <button id="theme-toggle" class="theme-toggle">
                <i data-feather="moon" class="icon-moon"></i>
                <i data-feather="sun" class="icon-sun"></i>
            </button>
        </header>

        <nav class="sidebar">
            <ul class="nav-menu">
                <li class="nav-item active" data-target="home">
                    <i data-feather="home"></i>
                    <span>Trang chá»§</span>
                </li>
                <li class="nav-item" data-target="getting-started">
                    <i data-feather="play-circle"></i>
                    <span>Báº¯t Ä‘áº§u</span>
                </li>
                <li class="nav-category">Thiáº¿t káº¿ Test</li>
                <li class="nav-item" data-target="structuring-metrics">
                    <i data-feather="layout"></i>
                    <span>Cáº¥u trÃºc vÃ  Chá»‰ sá»‘</span>
                </li>
                <li class="nav-item" data-target="london-vs-classical">
                    <i data-feather="git-pull-request"></i>
                    <span>London vs. Classical</span>
                </li>
                <li class="nav-item" data-target="test-data-patterns">
                    <i data-feather="database"></i>
                    <span>Máº«u dá»¯ liá»‡u Test</span>
                </li>
                <li class="nav-category">NguyÃªn táº¯c Cá»‘t lÃµi</li>
                <li class="nav-item" data-target="four-pillars">
                    <i data-feather="shield"></i>
                    <span>Bá»‘n trá»¥ cá»™t</span>
                </li>
                <li class="nav-item" data-target="behavior-vs-implementation">
                    <i data-feather="cpu"></i>
                    <span>Behavior vs. Implementation</span>
                </li>
                <li class="nav-category">Chá»§ Ä‘á» NÃ¢ng cao</li>
                <li class="nav-item" data-target="test-doubles">
                    <i data-feather="copy"></i>
                    <span>Test Doubles (Mocks & Stubs)</span>
                </li>
                <li class="nav-item" data-target="architecture-mocking">
                    <i data-feather="git-branch"></i>
                    <span>Kiáº¿n trÃºc vÃ  Mocking</span>
                </li>
            </ul>
        </nav>

        <main class="main-content">
            <section id="home" class="content-section active">
                <h1>ChÃ o má»«ng Ä‘áº¿n vá»›i Wiki Unit Test</h1>
                <p>ÄÃ¢y lÃ  trang tÃ i liá»‡u tá»•ng há»£p cÃ¡c kiáº¿n thá»©c, nguyÃªn táº¯c vÃ  bÃ i há»c thá»±c táº¿ vá» Unit Testing trong phÃ¡t triá»ƒn pháº§n má»m. Má»¥c tiÃªu cá»§a trang wiki nÃ y lÃ  biáº¿n nhá»¯ng kiáº¿n thá»©c phá»©c táº¡p thÃ nh má»™t nguá»“n tÃ i liá»‡u <strong>dá»… há»c, dá»… tra cá»©u</strong> cho cÃ¡c láº­p trÃ¬nh viÃªn.</p>

                <h2>TÃ³m táº¯t cá»‘t lÃµi</h2>
                <ul>
                    <li><strong>Unit testing lÃ  má»™t máº¡ng lÆ°á»›i an toÃ n (safety net)</strong> giÃºp phÃ¡t hiá»‡n lá»—i há»“i quy (regressions) vÃ  duy trÃ¬ tá»‘c Ä‘á»™ phÃ¡t triá»ƒn cá»§a dá»± Ã¡n vá» lÃ¢u dÃ i.</li>
                    <li>Náº¿u code cá»§a báº¡n <strong>khÃ³ Ä‘á»ƒ viáº¿t unit test</strong>, Ä‘Ã³ thÆ°á»ng lÃ  má»™t dáº¥u hiá»‡u cá»§a thiáº¿t káº¿ kÃ©m (vÃ­ dá»¥: tight coupling - liÃªn káº¿t cháº·t cháº½). NgÆ°á»£c láº¡i, code dá»… test khÃ´ng Ä‘áº£m báº£o ráº±ng Ä‘Ã³ lÃ  code hoÃ n háº£o.</li>
                    <li><strong>Má»¥c tiÃªu chÃ­nh khi viáº¿t test:</strong>
                        <ol>
                            <li>PhÃ¡t hiá»‡n lá»—i há»“i quy má»™t cÃ¡ch hiá»‡u quáº£.</li>
                            <li>Giáº£m chi phÃ­ báº£o trÃ¬ bá»™ test.</li>
                            <li>Cho phÃ©p tÃ¡i cáº¥u trÃºc (refactor) code má»™t cÃ¡ch an toÃ n vÃ  tá»± tin.</li>
                        </ol>
                    </li>
                    <li><strong>KhÃ´ng cÃ³ test:</strong> Dá»± Ã¡n cÃ³ thá»ƒ phÃ¡t triá»ƒn nhanh lÃºc Ä‘áº§u, nhÆ°ng sáº½ cháº­m láº¡i Ä‘Ã¡ng ká»ƒ vá» sau do sá»± entropy cá»§a mÃ£ nguá»“n (code ngÃ y cÃ ng phá»©c táº¡p, rá»‘i ráº¯m vÃ  dá»… há»ng).</li>
                    <li><strong>CÃ³ test:</strong> Viá»‡c sá»­a Ä‘á»•i vÃ  tÃ¡i cáº¥u trÃºc code trá»Ÿ nÃªn an toÃ n hÆ¡n, giÃºp dá»± Ã¡n duy trÃ¬ Ä‘Æ°á»£c cháº¥t lÆ°á»£ng vÃ  tá»‘c Ä‘á»™.</li>
                </ul>

                <blockquote>
                    <p>Code khÃ´ng pháº£i lÃ  má»™t tÃ i sáº£n (asset), nÃ³ lÃ  má»™t khoáº£n ná»£ (liability). Code cÃ ng nhiá»u, rá»§i ro tiá»m áº©n bug cÃ ng lá»›n. Unit test chÃ­nh lÃ  "táº¥m khiÃªn" báº£o vá»‡ báº¡n khá»i khoáº£n ná»£ Ä‘Ã³.</p>
                </blockquote>
                <p>HÃ£y báº¯t Ä‘áº§u khÃ¡m phÃ¡ cÃ¡c chá»§ Ä‘á» chi tiáº¿t hÆ¡n qua thanh Ä‘iá»u hÆ°á»›ng bÃªn trÃ¡i!</p>
            </section>

            <section id="getting-started" class="content-section">
                <h1>Báº¯t Ä‘áº§u vá»›i Unit Test</h1>
                <p>Pháº§n nÃ y sáº½ giá»›i thiá»‡u nhá»¯ng khÃ¡i niá»‡m ná»n táº£ng nháº¥t mÃ  báº¡n cáº§n náº¯m vá»¯ng trÆ°á»›c khi Ä‘i sÃ¢u vÃ o cÃ¡c ká»¹ thuáº­t chi tiáº¿t.</p>

                <h2>âœ… Test Tá»‘t vs. Test Tá»“i</h2>
                <p>Má»™t bÃ i test Ä‘Æ°á»£c coi lÃ  <strong>"tá»‘t"</strong> khi nÃ³ mang láº¡i giÃ¡ trá»‹ cao vá»›i chi phÃ­ báº£o trÃ¬ tháº¥p. NgÆ°á»£c láº¡i, má»™t bÃ i test <strong>"tá»“i"</strong> sáº½ trá»Ÿ thÃ nh gÃ¡nh náº·ng cho dá»± Ã¡n.</p>
                <ul>
                    <li><strong>Test Tá»‘t:</strong>
                        <ul>
                            <li>Cháº¡y nhanh.</li>
                            <li>Má»¥c Ä‘Ã­ch rÃµ rÃ ng, dá»… Ä‘á»c.</li>
                            <li>Äá»™c láº­p, khÃ´ng phá»¥ thuá»™c vÃ o cÃ¡c test khÃ¡c.</li>
                            <li>Ãt chi phÃ­ báº£o trÃ¬ khi code thay Ä‘á»•i (chá»‘ng chá»‹u Ä‘Æ°á»£c refactor).</li>
                            <li>Táº­p trung vÃ o cÃ¡c hÃ nh vi (behavior) quan trá»ng cá»§a há»‡ thá»‘ng.</li>
                        </ul>
                    </li>
                    <li><strong>Test Tá»“i:</strong>
                        <ul>
                            <li>Cháº¡y cháº­m.</li>
                            <li>Dá»… bá»‹ "vá»¡" (fail) dÃ¹ logic cá»§a á»©ng dá»¥ng váº«n Ä‘Ãºng.</li>
                            <li>CÃ³ nhiá»u code thá»«a (boilerplate).</li>
                            <li>GÃ¢y ra cÃ¡c cáº£nh bÃ¡o giáº£ (false positive), lÃ m máº¥t niá»m tin cá»§a láº­p trÃ¬nh viÃªn.</li>
                            <li>Bá»‹ trÃ¹ng láº·p (redundant) vá»›i cÃ¡c test khÃ¡c.</li>
                        </ul>
                    </li>
                </ul>

                <h2>PhÃ¢n loáº¡i cÃ¡c cáº¥p Ä‘á»™ Test</h2>
                <p>Trong phÃ¡t triá»ƒn pháº§n má»m, cÃ³ nhiá»u cáº¥p Ä‘á»™ kiá»ƒm thá»­ khÃ¡c nhau, má»—i loáº¡i cÃ³ má»™t má»¥c Ä‘Ã­ch riÃªng. Ba loáº¡i phá»• biáº¿n nháº¥t thÆ°á»ng Ä‘Æ°á»£c minh há»a qua mÃ´ hÃ¬nh Kim tá»± thÃ¡p Kiá»ƒm thá»­.</p>
                <ol>
                    <li><strong>Unit Test (Kiá»ƒm thá»­ Ä‘Æ¡n vá»‹):</strong>
                        <p><strong>Má»¥c tiÃªu:</strong> Kiá»ƒm tra má»™t Ä‘Æ¡n vá»‹ (unit) code nhá» vÃ  cÃ´ láº­p (vÃ­ dá»¥: má»™t hÃ m, má»™t class).<br>
                        <strong>Äáº·c Ä‘iá»ƒm:</strong> Cháº¡y hoÃ n toÃ n trong bá»™ nhá»› (in-memory), khÃ´ng phá»¥ thuá»™c vÃ o cÃ¡c há»‡ thá»‘ng bÃªn ngoÃ i nhÆ° database, file system hay network. Ráº¥t nhanh.</p>
                    </li>
                    <li><strong>Integration Test (Kiá»ƒm thá»­ tÃ­ch há»£p):</strong>
                        <p><strong>Má»¥c tiÃªu:</strong> Kiá»ƒm tra sá»± tÆ°Æ¡ng tÃ¡c vÃ  phá»‘i há»£p giá»¯a hai hay nhiá»u thÃ nh pháº§n cá»§a há»‡ thá»‘ng, hoáº·c giá»¯a há»‡ thá»‘ng cá»§a báº¡n vÃ  má»™t há»‡ thá»‘ng bÃªn ngoÃ i (database, API cá»§a bÃªn thá»© ba).<br>
                        <strong>Äáº·c Ä‘iá»ƒm:</strong> Cháº­m hÆ¡n Unit Test vÃ¬ cáº§n truy cáº­p vÃ o cÃ¡c tÃ i nguyÃªn ngoÃ i process.</p>
                    </li>
                    <li><strong>End-to-end (E2E) Test (Kiá»ƒm thá»­ Ä‘áº§u-cuá»‘i):</strong>
                        <p><strong>Má»¥c tiÃªu:</strong> Kiá»ƒm tra toÃ n bá»™ luá»“ng hoáº¡t Ä‘á»™ng cá»§a á»©ng dá»¥ng tá»« gÃ³c nhÃ¬n cá»§a ngÆ°á»i dÃ¹ng cuá»‘i.<br>
                        <strong>Äáº·c Ä‘iá»ƒm:</strong> MÃ´ phá»ng má»™t ngÆ°á»i dÃ¹ng tháº­t, tÆ°Æ¡ng tÃ¡c tá»« giao diá»‡n ngÆ°á»i dÃ¹ng (UI) xuá»‘ng tá»›i database. Ráº¥t cháº­m vÃ  chi phÃ­ báº£o trÃ¬ cao.</p>
                    </li>
                </ol>

                <h2>MÃ´ hÃ¬nh Kim tá»± thÃ¡p Kiá»ƒm thá»­ (Test Pyramid)</h2>
                <p>ÄÃ¢y lÃ  má»™t mÃ´ hÃ¬nh trá»±c quan giÃºp Ä‘á»‹nh hÆ°á»›ng chiáº¿n lÆ°á»£c viáº¿t test: hÃ£y viáº¿t tháº­t nhiá»u Unit Test, Ã­t hÆ¡n Integration Test vÃ  sá»‘ lÆ°á»£ng E2E Test lÃ  Ã­t nháº¥t.</p>
                <img src="images/test_pyramid.png" alt="Test Pyramid">
                <p><em>Báº¡n cÃ³ thá»ƒ tÃ¬m tháº¥y mÃ£ nguá»“n cá»§a sÆ¡ Ä‘á»“ nÃ y táº¡i <code>plantuml_sources/test_pyramid.puml</code> Ä‘á»ƒ tá»± render.</em></p>
            </section>

            <section id="structuring-metrics" class="content-section">
                <h1>Cáº¥u trÃºc vÃ  ÄÃ¡nh giÃ¡ Test</h1>
                <p>Sau khi náº¯m Ä‘Æ°á»£c cÃ¡c khÃ¡i niá»‡m cÆ¡ báº£n, bÆ°á»›c tiáº¿p theo lÃ  tÃ¬m hiá»ƒu cÃ¡ch cáº¥u trÃºc má»™t bÃ i test cho dá»… Ä‘á»c vÃ  cÃ¡ch Ä‘Ã¡nh giÃ¡ bá»™ test cá»§a báº¡n má»™t cÃ¡ch Ä‘Ãºng Ä‘áº¯n.</p>

                <h2>Máº«u AAA â€” Arrange / Act / Assert</h2>
                <p>ÄÃ¢y lÃ  má»™t máº«u cáº¥u trÃºc (pattern) cá»±c ká»³ phá»• biáº¿n giÃºp cho cÃ¡c bÃ i test trá»Ÿ nÃªn rÃµ rÃ ng vÃ  nháº¥t quÃ¡n. Má»™t bÃ i test nÃªn Ä‘Æ°á»£c chia thÃ nh 3 pháº§n riÃªng biá»‡t:</p>
                <ol>
                    <li><strong>Arrange (Sáº¯p Ä‘áº·t):</strong>
                        <p><strong>Má»¥c Ä‘Ã­ch:</strong> Chuáº©n bá»‹ má»i thá»© cáº§n thiáº¿t Ä‘á»ƒ bÃ i test cÃ³ thá»ƒ cháº¡y.<br>
                        <strong>CÃ´ng viá»‡c:</strong> Khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng, chuáº©n bá»‹ dá»¯ liá»‡u Ä‘áº§u vÃ o, thiáº¿t láº­p cÃ¡c mock/stub.</p>
                    </li>
                    <li><strong>Act (HÃ nh Ä‘á»™ng):</strong>
                        <p><strong>Má»¥c Ä‘Ã­ch:</strong> Thá»±c thi hÃ nh vi (behavior) mÃ  báº¡n muá»‘n kiá»ƒm tra.<br>
                        <strong>CÃ´ng viá»‡c:</strong> Gá»i phÆ°Æ¡ng thá»©c hoáº·c hÃ m cáº§n test. ThÃ´ng thÆ°á»ng, pháº§n nÃ y chá»‰ nÃªn cÃ³ má»™t dÃ²ng code duy nháº¥t.</p>
                    </li>
                    <li><strong>Assert (XÃ¡c minh):</strong>
                        <p><strong>Má»¥c Ä‘Ã­ch:</strong> Kiá»ƒm tra xem káº¿t quáº£ cá»§a hÃ nh Ä‘á»™ng cÃ³ Ä‘Ãºng nhÆ° mong Ä‘á»£i hay khÃ´ng.<br>
                        <strong>CÃ´ng viá»‡c:</strong> So sÃ¡nh káº¿t quáº£ tráº£ vá» hoáº·c tráº¡ng thÃ¡i cá»§a Ä‘á»‘i tÆ°á»£ng vá»›i má»™t giÃ¡ trá»‹ ká»³ vá»ng.</p>
                    </li>
                </ol>

                <h3>SÆ¡ Ä‘á»“ tuáº§n tá»± cá»§a máº«u AAA</h3>
                <p>SÆ¡ Ä‘á»“ nÃ y minh há»a luá»“ng hoáº¡t Ä‘á»™ng cá»§a má»™t bÃ i test theo máº«u AAA.</p>
                <img src="images/aaa_pattern_sequence.png" alt="AAA Pattern Sequence">
                <p><em>Báº¡n cÃ³ thá»ƒ tÃ¬m tháº¥y mÃ£ nguá»“n cá»§a sÆ¡ Ä‘á»“ nÃ y táº¡i <code>plantuml_sources/aaa_pattern_sequence.puml</code> Ä‘á»ƒ tá»± render.</em></p>

                <h2>CÃ¡c chá»‰ sá»‘ Äá»™ bao phá»§ (Coverage Metrics) â€” Hiá»ƒu cho Ä‘Ãºng</h2>
                <p>Äá»™ bao phá»§ (code coverage) lÃ  má»™t chá»‰ sá»‘ Ä‘o lÆ°á»ng tá»· lá»‡ code cá»§a báº¡n Ä‘Æ°á»£c thá»±c thi bá»Ÿi cÃ¡c bÃ i test. Tuy nhiÃªn, Ä‘Ã¢y lÃ  má»™t chá»‰ sá»‘ ráº¥t dá»… bá»‹ hiá»ƒu sai.</p>
                <ul>
                    <li><strong>Line coverage (Äá»™ phá»§ dÃ²ng lá»‡nh):</strong> Tá»· lá»‡ pháº§n trÄƒm sá»‘ dÃ²ng code Ä‘Ã£ Ä‘Æ°á»£c cháº¡y qua bá»Ÿi bá»™ test.</li>
                    <li><strong>Branch coverage (Äá»™ phá»§ nhÃ¡nh):</strong> Tá»· lá»‡ pháº§n trÄƒm cÃ¡c nhÃ¡nh quyáº¿t Ä‘á»‹nh (vÃ­ dá»¥: <code>if/else</code>, <code>switch/case</code>) Ä‘Ã£ Ä‘Æ°á»£c thá»±c thi. ÄÃ¢y lÃ  chá»‰ sá»‘ quan trá»ng hÆ¡n line coverage.</li>
                </ul>

                <h3>CÃ´ng thá»©c tÃ­nh Branch Coverage</h3>
                <blockquote>
                    <p>Branch coverage = (Sá»‘ nhÃ¡nh Ä‘Ã£ Ä‘Æ°á»£c test cháº¡y qua) / (Tá»•ng sá»‘ nhÃ¡nh trong mÃ£ nguá»“n)</p>
                </blockquote>

                <h3>Coverage lÃ  má»™t chá»‰ bÃ¡o, khÃ´ng pháº£i má»¥c tiÃªu</h3>
                <p>HÃ£y nhá»› ráº±ng, coverage lÃ  má»™t cÃ´ng cá»¥ Ä‘á»ƒ tÃ¬m ra nhá»¯ng pháº§n code <strong>chÆ°a Ä‘Æ°á»£c test</strong>, chá»© khÃ´ng pháº£i lÃ  thÆ°á»›c Ä‘o cháº¥t lÆ°á»£ng cá»§a bá»™ test.</p>
                <ul>
                    <li><strong>Coverage tháº¥p (vÃ­ dá»¥: < 50%):</strong> Cháº¯c cháº¯n lÃ  má»™t dáº¥u hiá»‡u xáº¥u. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  má»™t pháº§n lá»›n code cá»§a báº¡n chÆ°a há» Ä‘Æ°á»£c kiá»ƒm tra.</li>
                    <li><strong>Coverage cao (vÃ­ dá»¥: 90-100%):</strong> <strong>KhÃ´ng Ä‘áº£m báº£o</strong> ráº±ng bá»™ test cá»§a báº¡n tá»‘t. Má»™t bÃ i test cÃ³ thá»ƒ cháº¡y qua 100% dÃ²ng code nhÆ°ng láº¡i thiáº¿u cÃ¡c <code>assert</code> quan trá»ng, hoáº·c chá»‰ kiá»ƒm tra nhá»¯ng thá»© táº§m thÆ°á»ng.</li>
                </ul>
                <p><strong>Lá»i khuyÃªn:</strong> Äá»«ng Ä‘uá»•i theo con sá»‘ coverage. HÃ£y táº­p trung vÃ o viá»‡c viáº¿t nhá»¯ng bÃ i test cÃ³ Ã½ nghÄ©a, kiá»ƒm tra cÃ¡c logic nghiá»‡p vá»¥ quan trá»ng.</p>
            </section>

            <section id="london-vs-classical" class="content-section">
                <h1>Hai trÆ°á»ng phÃ¡i Unit Testing: London vs. Classical</h1>
                <p>Trong cá»™ng Ä‘á»“ng phÃ¡t triá»ƒn pháº§n má»m, cÃ³ hai trÆ°á»ng phÃ¡i tÆ° duy chÃ­nh vá» cÃ¡ch tiáº¿p cáº­n unit testing, Ä‘áº·c biá»‡t lÃ  vá» váº¥n Ä‘á» "cÃ¡ch ly" (isolation) vÃ  viá»‡c sá»­ dá»¥ng cÃ¡c Ä‘á»‘i tÆ°á»£ng giáº£ (test doubles).</p>

                <h2>TrÆ°á»ng phÃ¡i London (cÃ²n gá»i lÃ  Mockist)</h2>
                <ul>
                    <li><strong>Triáº¿t lÃ½:</strong> Má»™t "unit" (Ä‘Æ¡n vá»‹) Ä‘Æ°á»£c kiá»ƒm thá»­ lÃ  má»™t <strong>class duy nháº¥t</strong>. Má»i dependency (Ä‘á»‘i tÆ°á»£ng phá»¥ thuá»™c) cá»§a class Ä‘Ã³, dÃ¹ lÃ  má»™t class khÃ¡c trong há»‡ thá»‘ng cá»§a báº¡n, Ä‘á»u pháº£i Ä‘Æ°á»£c thay tháº¿ báº±ng mock.</li>
                    <li><strong>Táº­p trung vÃ o TÆ°Æ¡ng tÃ¡c (Interaction):</strong> CÃ¡c bÃ i test theo trÆ°á»ng phÃ¡i nÃ y xÃ¡c minh xem class Ä‘ang Ä‘Æ°á»£c test (SUT - System Under Test) cÃ³ gá»i Ä‘Ãºng cÃ¡c phÆ°Æ¡ng thá»©c cá»§a dependency hay khÃ´ng. ÄÃ¢y Ä‘Æ°á»£c gá»i lÃ  <em>interaction testing</em>.</li>
                    <li><strong>Æ¯u Ä‘iá»ƒm:</strong>
                        <ul>
                            <li>Khi má»™t bÃ i test fail, báº¡n biáº¿t chÃ­nh xÃ¡c class nÃ o Ä‘ang bá»‹ lá»—i.</li>
                            <li>KhÃ´ng cáº§n pháº£i khá»Ÿi táº¡o má»™t Ä‘á»“ thá»‹ Ä‘á»‘i tÆ°á»£ng (object graph) phá»©c táº¡p.</li>
                        </ul>
                    </li>
                    <li><strong>NhÆ°á»£c Ä‘iá»ƒm:</strong>
                        <ul>
                            <li>CÃ¡c bÃ i test bá»‹ <strong>gáº¯n cháº·t vÃ o chi tiáº¿t cÃ i Ä‘áº·t (implementation details)</strong>. Náº¿u báº¡n refactor code báº±ng cÃ¡ch thay Ä‘á»•i cÃ¡ch cÃ¡c class tÆ°Æ¡ng tÃ¡c vá»›i nhau (nhÆ°ng váº«n giá»¯ Ä‘Ãºng káº¿t quáº£ cuá»‘i cÃ¹ng), cÃ¡c bÃ i test sáº½ bá»‹ há»ng (false positive). Äiá»u nÃ y lÃ m tÄƒng Ä‘Ã¡ng ká»ƒ chi phÃ­ báº£o trÃ¬.</li>
                        </ul>
                    </li>
                </ul>

                <h2>TrÆ°á»ng phÃ¡i Classical (cÃ²n gá»i lÃ  Detroit hoáº·c Classicist)</h2>
                <ul>
                    <li><strong>Triáº¿t lÃ½:</strong> Má»™t "unit" lÃ  má»™t <strong>hÃ nh vi nghiá»‡p vá»¥ (unit of behavior)</strong>. NÃ³ cÃ³ thá»ƒ bao gá»“m má»™t class hoáº·c má»™t nhÃ³m cÃ¡c class lÃ m viá»‡c cÃ¹ng nhau Ä‘á»ƒ hoÃ n thÃ nh má»™t nhiá»‡m vá»¥.</li>
                    <li><strong>Táº­p trung vÃ o Káº¿t quáº£ (State):</strong> CÃ¡c bÃ i test theo trÆ°á»ng phÃ¡i nÃ y kiá»ƒm tra káº¿t quáº£ cuá»‘i cÃ¹ng hoáº·c sá»± thay Ä‘á»•i tráº¡ng thÃ¡i cá»§a há»‡ thá»‘ng sau khi hÃ nh Ä‘á»™ng Ä‘Æ°á»£c thá»±c hiá»‡n. ÄÃ¢y Ä‘Æ°á»£c gá»i lÃ  <em>state testing</em>.</li>
                    <li><strong>CÃ¡ch ly:</strong> TrÆ°á»ng phÃ¡i nÃ y Ä‘á»‹nh nghÄ©a "cÃ¡ch ly" lÃ  viá»‡c cÃ¡c <strong>bÃ i test pháº£i Ä‘á»™c láº­p vá»›i nhau</strong>. Test A khÃ´ng Ä‘Æ°á»£c áº£nh hÆ°á»Ÿng Ä‘áº¿n káº¿t quáº£ cá»§a Test B.</li>
                    <li><strong>Sá»­ dá»¥ng Test Doubles:</strong> Chá»‰ sá»­ dá»¥ng mock/stub cho cÃ¡c <strong>dependency thá»±c sá»± bÃªn ngoÃ i vÃ  cháº­m</strong>, nhÆ° network, database, file system (Ä‘Æ°á»£c gá»i lÃ  <em>shared dependencies</em>). CÃ¡c class thÃ´ng thÆ°á»ng trong cÃ¹ng má»™t há»‡ thá»‘ng Ä‘Æ°á»£c sá»­ dá»¥ng trá»±c tiáº¿p.</li>
                    <li><strong>Æ¯u Ä‘iá»ƒm:</strong>
                        <ul>
                            <li>CÃ¡c bÃ i test cÃ³ kháº£ nÄƒng <strong>chá»‘ng chá»‹u refactoring cao</strong>. Báº¡n cÃ³ thá»ƒ tá»± do thay Ä‘á»•i cáº¥u trÃºc code ná»™i bá»™ miá»…n lÃ  káº¿t quáº£ Ä‘áº§u ra khÃ´ng Ä‘á»•i.</li>
                            <li>Bá»™ test pháº£n Ã¡nh Ä‘Ãºng hÆ¡n giÃ¡ trá»‹ nghiá»‡p vá»¥ cá»§a á»©ng dá»¥ng.</li>
                        </ul>
                    </li>
                    <li><strong>NhÆ°á»£c Ä‘iá»ƒm:</strong>
                        <ul>
                            <li>Khi má»™t bÃ i test fail, cÃ³ thá»ƒ khÃ³ xÃ¡c Ä‘á»‹nh ngay láº­p tá»©c class nÃ o gÃ¢y ra lá»—i.</li>
                        </ul>
                    </li>
                </ul>

                <h2>Lá»i khuyÃªn</h2>
                <p>Cáº£ hai trÆ°á»ng phÃ¡i Ä‘á»u cÃ³ Æ°u vÃ  nhÆ°á»£c Ä‘iá»ƒm riÃªng. Tuy nhiÃªn, Ä‘á»ƒ xÃ¢y dá»±ng má»™t bá»™ test bá»n vá»¯ng vÃ  Ã­t chi phÃ­ báº£o trÃ¬, <strong>trÆ°á»ng phÃ¡i Classical thÆ°á»ng Ä‘Æ°á»£c Æ°u tiÃªn hÆ¡n</strong>. Viá»‡c cÃ¡c bÃ i test cÃ³ kháº£ nÄƒng chá»‘ng chá»‹u refactoring lÃ  má»™t trong nhá»¯ng yáº¿u tá»‘ quan trá»ng nháº¥t cá»§a má»™t bá»™ test tá»‘t.</p>
                <blockquote>
                    <p><strong>Quan trá»ng:</strong> HÃ£y chá»n má»™t phong cÃ¡ch nháº¥t quÃ¡n cho toÃ n bá»™ Ä‘á»™i nhÃ³m vÃ  tuÃ¢n thá»§ nÃ³. Viá»‡c trá»™n láº«n hai phong cÃ¡ch nÃ y trong cÃ¹ng má»™t codebase cÃ³ thá»ƒ dáº«n Ä‘áº¿n nhá»¯ng cuá»™c tranh cÃ£i khÃ´ng cáº§n thiáº¿t vÃ  lÃ m cho bá»™ test trá»Ÿ nÃªn khÃ³ hiá»ƒu.</p>
                </blockquote>
            </section>

            <section id="test-data-patterns" class="content-section">
                <h1>CÃ¡c máº«u (Patterns) xá»­ lÃ½ dá»¯ liá»‡u Test</h1>
                <p>Khi viáº¿t unit test, pháº§n <code>Arrange</code> (chuáº©n bá»‹ dá»¯ liá»‡u) thÆ°á»ng lÃ  pháº§n dÃ i dÃ²ng vÃ  láº·p Ä‘i láº·p láº¡i nháº¥t. Náº¿u khÃ´ng Ä‘Æ°á»£c quáº£n lÃ½ tá»‘t, nÃ³ cÃ³ thá»ƒ lÃ m cho cÃ¡c bÃ i test trá»Ÿ nÃªn khÃ³ Ä‘á»c vÃ  khÃ³ báº£o trÃ¬. DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ máº«u thiáº¿t káº¿ phá»• biáº¿n giÃºp báº¡n giáº£i quyáº¿t váº¥n Ä‘á» nÃ y.</p>

                <h2>Váº¥n Ä‘á»: Pháº§n <code>Arrange</code> quÃ¡ dÃ i</h2>
                <p>HÃ£y xem xÃ©t má»™t vÃ­ dá»¥ vá»›i cÃ¡c model <code>Customer</code>, <code>Order</code>, <code>Item</code>.</p>
<pre><code class="language-python"># models.py
class Item:
    def __init__(self, name: str, price: float):
        self.name = name
        self.price = price

class Customer:
    def __init__(self, first_name: str, is_vip: bool = False):
        self.first_name = first_name
        self.is_vip = is_vip

class Order:
    def __init__(self, customer: Customer):
        self.customer = customer
        self.items = []

    def add_item(self, item: Item):
        self.items.append(item)

    @property
    def total(self) -> float:
        return sum(i.price for i in self.items)

    def apply_discount(self):
        if self.customer.is_vip:
            # VIP: 10% off
            total = self.total
            return round(total * 0.9, 2)
        return round(self.total, 2)
</code></pre>
                <p>Má»™t bÃ i test thÃ´ng thÆ°á»ng cÃ³ thá»ƒ trÃ´ng nhÆ° tháº¿ nÃ y:</p>
<pre><code class="language-python"># test_standard.py
from models import Item, Customer, Order

def test_order_total_with_discount_standard():
    # ARRANGE (ráº¥t nhiá»u chi tiáº¿t, khÃ´ng pháº£i táº¥t cáº£ Ä‘á»u quan trá»ng)
    customer = Customer(first_name="Hoang", is_vip=True)
    order = Order(customer)
    order.add_item(Item("Laptop", 1000))
    order.add_item(Item("Mouse", 50))

    # ACT
    discounted_price = order.apply_discount()

    # ASSERT
    assert discounted_price == 945.0
</code></pre>
                <p>Trong bÃ i test trÃªn, cÃ¡c chi tiáº¿t nhÆ° <code>"Hoang"</code>, <code>"Laptop"</code>, <code>"Mouse"</code> khÃ´ng thá»±c sá»± quan trá»ng Ä‘á»‘i vá»›i logic cáº§n test (logic giáº£m giÃ¡ cho khÃ¡ch VIP). ChÃºng lÃ m cho bÃ i test bá»‹ "nhiá»…u".</p>

                <h2>Máº«u 1: Object Mother</h2>
                <p><strong>Ã tÆ°á»Ÿng:</strong> Táº¡o má»™t class "Máº¹" chá»©a cÃ¡c phÆ°Æ¡ng thá»©c <code>static</code> Ä‘á»ƒ táº¡o ra cÃ¡c phiÃªn báº£n phá»• biáº¿n cá»§a má»™t Ä‘á»‘i tÆ°á»£ng.</p>
<pre><code class="language-python"># test_object_mother.py
from models import Item, Order

class CustomerMother:
    @staticmethod
    def vip():
        from models import Customer
        return Customer(first_name="VIP Customer", is_vip=True)

    @staticmethod
    def regular():
        from models import Customer
        return Customer(first_name="Regular Customer", is_vip=False)

def test_order_total_with_object_mother():
    # ARRANGE (gá»n gÃ ng hÆ¡n, che giáº¥u chi tiáº¿t khÃ´ng cáº§n thiáº¿t)
    customer = CustomerMother.vip()
    order = Order(customer)
    order.add_item(Item("Laptop", 1000))

    # ACT
    discounted_price = order.apply_discount()

    # ASSERT
    assert discounted_price == 900.0
</code></pre>
                <ul>
                    <li><strong>Æ¯u Ä‘iá»ƒm:</strong> Nhanh, gá»n, dá»… sá»­ dá»¥ng cho cÃ¡c trÆ°á»ng há»£p phá»• biáº¿n.</li>
                    <li><strong>NhÆ°á»£c Ä‘iá»ƒm:</strong> KÃ©m linh hoáº¡t. Náº¿u báº¡n cáº§n má»™t khÃ¡ch hÃ ng VIP nhÆ°ng cÃ³ tÃªn khÃ¡c, báº¡n sáº½ pháº£i thÃªm má»™t phÆ°Æ¡ng thá»©c má»›i hoáº·c sá»­a Ä‘á»•i Ä‘á»‘i tÆ°á»£ng sau khi táº¡o.</li>
                </ul>

                <h2>Máº«u 2: Test Data Builder</h2>
                <p><strong>Ã tÆ°á»Ÿng:</strong> Táº¡o má»™t class <code>Builder</code> vá»›i má»™t API linh hoáº¡t (fluent interface) cho phÃ©p báº¡n tÃ¹y chá»‰nh cÃ¡c thuá»™c tÃ­nh cá»§a Ä‘á»‘i tÆ°á»£ng má»™t cÃ¡ch dá»… dÃ ng.</p>
<pre><code class="language-python"># test_builder.py
from models import Item, Order

class CustomerBuilder:
    def __init__(self):
        self._first_name = "Default Name"
        self._is_vip = False

    def with_vip(self, is_vip: bool):
        self._is_vip = is_vip
        return self

    def with_name(self, name: str):
        self._first_name = name
        return self

    def build(self):
        from models import Customer
        return Customer(first_name=self._first_name, is_vip=self._is_vip)

def test_order_with_builder():
    # ARRANGE (linh hoáº¡t vÃ  ráº¥t dá»… Ä‘á»c)
    customer = CustomerBuilder().with_vip(True).with_name("An").build()
    order = Order(customer)
    order.add_item(Item("Pen", 10))

    # ACT
    discounted_price = order.apply_discount()

    # ASSERT
    assert discounted_price == 9.0
</code></pre>
                <ul>
                    <li><strong>Æ¯u Ä‘iá»ƒm:</strong> Ráº¥t linh hoáº¡t, dá»… Ä‘á»c, thá»ƒ hiá»‡n rÃµ Ã½ Ä‘á»‹nh cá»§a bÃ i test (chá»‰ nhá»¯ng thuá»™c tÃ­nh Ä‘Æ°á»£c tÃ¹y chá»‰nh má»›i quan trá»ng).</li>
                    <li><strong>NhÆ°á»£c Ä‘iá»ƒm:</strong> Cáº§n viáº¿t nhiá»u code hÆ¡n má»™t chÃºt Ä‘á»ƒ táº¡o builder.</li>
                </ul>

                <h2>Khi nÃ o nÃªn dÃ¹ng máº«u nÃ o?</h2>
                <ul>
                    <li><strong>Object Mother:</strong> PhÃ¹ há»£p cho cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘Æ¡n giáº£n, cÃ³ Ã­t biáº¿n thá»ƒ vÃ  Ä‘Æ°á»£c sá»­ dá»¥ng rá»™ng rÃ£i.</li>
                    <li><strong>Test Data Builder:</strong> LÃ  lá»±a chá»n tá»‘t nháº¥t cho cÃ¡c Ä‘á»‘i tÆ°á»£ng phá»©c táº¡p hoáº·c khi báº¡n cáº§n nhiá»u biáº¿n thá»ƒ khÃ¡c nhau trong cÃ¡c bÃ i test. ÄÃ¢y thÆ°á»ng lÃ  máº«u Ä‘Æ°á»£c Æ°u tiÃªn trong cÃ¡c dá»± Ã¡n lá»›n.</li>
                </ul>
            </section>

            <section id="four-pillars" class="content-section">
                <h1>Bá»‘n trá»¥ cá»™t cá»§a má»™t Unit Test tá»‘t</h1>
                <p>Äá»ƒ má»™t bÃ i test thá»±c sá»± cÃ³ giÃ¡ trá»‹, nÃ³ khÃ´ng chá»‰ cáº§n tÃ¬m ra lá»—i. Má»™t bÃ i test tá»‘t pháº£i cÃ¢n báº±ng giá»¯a viá»‡c phÃ¡t hiá»‡n lá»—i vÃ  chi phÃ­ báº£o trÃ¬ nÃ³. TÃ¡c giáº£ Vladimir Khorikov Ä‘Ã£ Ä‘á»‹nh nghÄ©a má»™t há»‡ thá»‘ng gá»“m bá»‘n trá»¥ cá»™t Ä‘á»ƒ Ä‘Ã¡nh giÃ¡ cháº¥t lÆ°á»£ng cá»§a má»™t unit test.</p>
                <p>Má»™t bÃ i test tá»‘t pháº£i Ä‘á»©ng vá»¯ng trÃªn cáº£ bá»‘n trá»¥ cá»™t nÃ y:</p>
                <ol>
                    <li><strong>Protection against regressions (Báº£o vá»‡ khá»i lá»—i há»“i quy)</strong></li>
                    <li><strong>Resistance to refactoring (Chá»‘ng chá»‹u Ä‘Æ°á»£c tÃ¡i cáº¥u trÃºc)</strong></li>
                    <li><strong>Fast feedback (Pháº£n há»“i nhanh)</strong></li>
                    <li><strong>Maintainability (Dá»… báº£o trÃ¬)</strong></li>
                </ol>
                <hr>
                <h2>Trá»¥ cá»™t 1: Báº£o vá»‡ khá»i lá»—i há»“i quy</h2>
                <p>ÄÃ¢y lÃ  má»¥c Ä‘Ã­ch cÆ¡ báº£n nháº¥t cá»§a má»i bÃ i test.</p>
                <ul>
                    <li><strong>Lá»—i há»“i quy (Regression) lÃ  gÃ¬?</strong> LÃ  khi má»™t tÃ­nh nÄƒng Ä‘ang hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng bá»—ng dÆ°ng bá»‹ há»ng sau khi báº¡n thay Ä‘á»•i code á»Ÿ má»™t nÆ¡i khÃ¡c.</li>
                    <li><strong>LÃ m sao Ä‘á»ƒ má»™t bÃ i test cÃ³ kháº£ nÄƒng báº£o vá»‡ tá»‘t?</strong>
                        <ul>
                            <li><strong>Thá»±c thi nhiá»u code:</strong> BÃ i test cháº¡y qua cÃ ng nhiá»u logic nghiá»‡p vá»¥ thÃ¬ kháº£ nÄƒng phÃ¡t hiá»‡n lá»—i cÃ ng cao.</li>
                            <li><strong>Kiá»ƒm tra code phá»©c táº¡p:</strong> Test má»™t thuáº­t toÃ¡n phá»©c táº¡p cÃ³ giÃ¡ trá»‹ hÆ¡n lÃ  test má»™t hÃ m getter/setter Ä‘Æ¡n giáº£n.</li>
                            <li><strong>Táº­p trung vÃ o nghiá»‡p vá»¥ cá»‘t lÃµi:</strong> Test cÃ¡c logic quan trá»ng nhÆ° thanh toÃ¡n, phÃ¢n quyá»n sáº½ cÃ³ giÃ¡ trá»‹ cao hÆ¡n.</li>
                        </ul>
                    </li>
                    <li><strong>Lá»i khuyÃªn:</strong> Äá»«ng lÃ£ng phÃ­ thá»i gian test nhá»¯ng Ä‘oáº¡n code táº§m thÆ°á»ng (trivial code) khÃ´ng chá»©a logic.</li>
                </ul>
                <hr>
                <h2>Trá»¥ cá»™t 2: Chá»‘ng chá»‹u Ä‘Æ°á»£c tÃ¡i cáº¥u trÃºc</h2>
                <p>ÄÃ¢y lÃ  trá»¥ cá»™t quan trá»ng nháº¥t vÃ  thÆ°á»ng bá»‹ bá» qua nháº¥t, quyáº¿t Ä‘á»‹nh chi phÃ­ báº£o trÃ¬ cá»§a bá»™ test.</p>
                <ul>
                    <li><strong>TÃ¡i cáº¥u trÃºc (Refactoring) lÃ  gÃ¬?</strong> LÃ  viá»‡c thay Ä‘á»•i cáº¥u trÃºc code bÃªn trong (vÃ­ dá»¥: tá»‘i Æ°u thuáº­t toÃ¡n, Ä‘á»•i tÃªn biáº¿n) mÃ  <strong>khÃ´ng lÃ m thay Ä‘á»•i hÃ nh vi cÃ³ thá»ƒ quan sÃ¡t Ä‘Æ°á»£c bÃªn ngoÃ i</strong>.</li>
                    <li><strong>BÃ¡o Ä‘á»™ng giáº£ (False Positive):</strong> Náº¿u báº¡n tÃ¡i cáº¥u trÃºc code mÃ  bÃ i test bá»‹ "Ä‘á»" (fail), trong khi chá»©c nÄƒng váº«n Ä‘Ãºng, thÃ¬ bÃ i test Ä‘Ã³ Ä‘Ã£ táº¡o ra má»™t bÃ¡o Ä‘á»™ng giáº£.</li>
                    <li><strong>Táº¡i sao bÃ¡o Ä‘á»™ng giáº£ láº¡i nguy hiá»ƒm?</strong>
                        <ul>
                            <li><strong>Máº¥t niá»m tin:</strong> Khi test bÃ¡o lá»—i giáº£ quÃ¡ nhiá»u, láº­p trÃ¬nh viÃªn sáº½ dáº§n máº¥t tin tÆ°á»Ÿng vÃ o bá»™ test. Há» sáº½ báº¯t Ä‘áº§u lá» Ä‘i cÃ¡c cáº£nh bÃ¡o, vÃ  Ä‘Ã³ lÃ  lÃºc lá»—i tháº­t sá»± (true positive) sáº½ bá»‹ bá» lá»t.</li>
                            <li><strong>Ngáº¡i thay Ä‘á»•i:</strong> Má»™t bá»™ test "mong manh" (brittle) sáº½ cáº£n trá»Ÿ viá»‡c tÃ¡i cáº¥u trÃºc, khiáº¿n cho codebase ngÃ y cÃ ng xuá»‘ng cáº¥p.</li>
                        </ul>
                    </li>
                    <li><strong>LÃ m sao Ä‘á»ƒ test chá»‘ng chá»‹u Ä‘Æ°á»£c tÃ¡i cáº¥u trÃºc?</strong> HÃ£y kiá»ƒm tra <strong>"CÃ¡i gÃ¬" (What - káº¿t quáº£ cuá»‘i cÃ¹ng)</strong> thay vÃ¬ <strong>"LÃ m tháº¿ nÃ o" (How - cÃ¡c bÆ°á»›c thá»±c hiá»‡n bÃªn trong)</strong>.</li>
                </ul>
                <hr>
                <h2>Trá»¥ cá»™t 3: Pháº£n há»“i nhanh</h2>
                <p>Tá»‘c Ä‘á»™ lÃ  yáº¿u tá»‘ quyáº¿t Ä‘á»‹nh táº§n suáº¥t báº¡n cháº¡y bá»™ test.</p>
                <ul>
                    <li><strong>VÃ²ng láº·p pháº£n há»“i (Feedback Loop):</strong> Test cÃ ng nhanh, báº¡n cÃ ng cÃ³ thá»ƒ cháº¡y chÃºng thÆ°á»ng xuyÃªn hÆ¡n. Äiá»u nÃ y giÃºp báº¡n phÃ¡t hiá»‡n lá»—i ngay khi nÃ³ vá»«a Ä‘Æ°á»£c táº¡o ra, lÃ m cho viá»‡c sá»­a lá»—i trá»Ÿ nÃªn dá»… dÃ ng vÃ  Ã­t tá»‘n kÃ©m hÆ¡n ráº¥t nhiá»u.</li>
                    <li><strong>PhÃ¢n biá»‡t Unit Test vÃ  Integration Test:</strong> ÄÃ¢y chÃ­nh lÃ  yáº¿u tá»‘ khÃ¡c biá»‡t lá»›n nháº¥t. Unit test pháº£i cháº¡y trong vÃ i mili giÃ¢y, trong khi integration test cÃ³ thá»ƒ máº¥t vÃ i giÃ¢y hoáº·c hÆ¡n.</li>
                </ul>
                <hr>
                <h2>Trá»¥ cá»™t 4: Dá»… báº£o trÃ¬</h2>
                <p>Code test cÅ©ng quan trá»ng nhÆ° code sáº£n pháº©m. Má»™t bÃ i test khÃ³ Ä‘á»c, khÃ³ cháº¡y sáº½ trá»Ÿ thÃ nh gÃ¡nh náº·ng.</p>
                <ul>
                    <li><strong>Äá»™ khÃ³ hiá»ƒu:</strong>
                        <ul>
                            <li><strong>Ngáº¯n gá»n:</strong> Má»™t bÃ i test nÃªn ngáº¯n gá»n vÃ  táº­p trung vÃ o má»™t ká»‹ch báº£n duy nháº¥t.</li>
                            <li><strong>Dá»… Ä‘á»c:</strong> Sá»­ dá»¥ng cÃ¡c máº«u nhÆ° AAA, Ä‘áº·t tÃªn test rÃµ rÃ ng Ä‘á»ƒ thá»ƒ hiá»‡n Ã½ Ä‘á»‹nh.</li>
                        </ul>
                    </li>
                    <li><strong>Äá»™ khÃ³ váº­n hÃ nh:</strong>
                        <ul>
                            <li>Má»™t unit test tá»‘t pháº£i cÃ³ thá»ƒ cháº¡y mÃ  khÃ´ng cáº§n má»™t mÃ´i trÆ°á»ng phá»©c táº¡p (khÃ´ng cáº§n database, khÃ´ng cáº§n server, khÃ´ng cáº§n file cáº¥u hÃ¬nh).</li>
                        </ul>
                    </li>
                </ul>
                <hr>
                <h2>Sá»± Ä‘Ã¡nh Ä‘á»•i</h2>
                <p>KhÃ´ng thá»ƒ cÃ³ má»™t bÃ i test hoÃ n háº£o Ä‘áº¡t Ä‘iá»ƒm tá»‘i Ä‘a á»Ÿ cáº£ 4 trá»¥ cá»™t. Sáº½ luÃ´n cÃ³ sá»± Ä‘Ã¡nh Ä‘á»•i, Ä‘áº·c biá»‡t lÃ  giá»¯a <strong>Trá»¥ cá»™t 1 (Báº£o vá»‡)</strong> vÃ  <strong>Trá»¥ cá»™t 2 (Chá»‘ng chá»‹u refactor) & 3 (Tá»‘c Ä‘á»™)</strong>.</p>
                <ul>
                    <li><strong>E2E Test:</strong> Báº£o vá»‡ tá»‘t nháº¥t, chá»‘ng chá»‹u refactor tá»‘t, nhÆ°ng pháº£n há»“i cá»±c ká»³ cháº­m.</li>
                    <li><strong>Unit Test mong manh:</strong> Báº£o vá»‡ tá»‘t, pháº£n há»“i nhanh, nhÆ°ng chá»‘ng chá»‹u refactor cá»±c tá»‡.</li>
                    <li><strong>Unit Test tá»‘t:</strong> CÃ¢n báº±ng giá»¯a cáº£ bá»‘n yáº¿u tá»‘, trong Ä‘Ã³ <strong>kháº£ nÄƒng chá»‘ng chá»‹u refactor vÃ  dá»… báº£o trÃ¬ lÃ  khÃ´ng thá»ƒ nhÃ¢n nhÆ°á»£ng</strong>.</li>
                </ul>
            </section>

            <section id="behavior-vs-implementation" class="content-section">
                <h1>Behavior vs. Implementation Details</h1>
                <p>Äá»ƒ viáº¿t Ä‘Æ°á»£c nhá»¯ng bÃ i test cÃ³ kháº£ nÄƒng chá»‘ng chá»‹u tÃ¡i cáº¥u trÃºc (resistant to refactoring), báº¡n buá»™c pháº£i hiá»ƒu rÃµ vÃ  phÃ¢n biá»‡t Ä‘Æ°á»£c Ä‘Ã¢u lÃ  <strong>hÃ nh vi quan sÃ¡t Ä‘Æ°á»£c</strong> vÃ  Ä‘Ã¢u lÃ  <strong>chi tiáº¿t cÃ i Ä‘áº·t</strong>.</p>
                <ul>
                    <li><strong>Kiá»ƒm tra hÃ nh vi quan sÃ¡t Ä‘Æ°á»£c:</strong> GiÃºp bÃ i test cá»§a báº¡n trá»Ÿ nÃªn bá»n vá»¯ng.</li>
                    <li><strong>Kiá»ƒm tra chi tiáº¿t cÃ i Ä‘áº·t:</strong> Khiáº¿n bÃ i test cá»§a báº¡n trá»Ÿ nÃªn mong manh (brittle).</li>
                </ul>
                <h2>Äá»‹nh nghÄ©a</h2>
                <p>Má»i Ä‘oáº¡n code Ä‘á»u cÃ³ thá»ƒ Ä‘Æ°á»£c phÃ¢n loáº¡i theo hai gÃ³c nhÃ¬n:</p>
                <ol>
                    <li><strong>GÃ³c nhÃ¬n CÃ´ng khai (Public vs. Private):</strong>
                        <ul>
                            <li><strong>Public API:</strong> CÃ¡c phÆ°Æ¡ng thá»©c vÃ  thuá»™c tÃ­nh mÃ  code bÃªn ngoÃ i (client) Ä‘Æ°á»£c phÃ©p truy cáº­p.</li>
                            <li><strong>Private API:</strong> CÃ¡c phÆ°Æ¡ng thá»©c vÃ  thuá»™c tÃ­nh chá»‰ Ä‘Æ°á»£c sá»­ dá»¥ng trong ná»™i bá»™ cá»§a class.</li>
                        </ul>
                    </li>
                    <li><strong>GÃ³c nhÃ¬n Má»¥c Ä‘Ã­ch (Behavior vs. Implementation):</strong>
                        <ul>
                            <li><strong>HÃ nh vi quan sÃ¡t Ä‘Æ°á»£c (Observable Behavior):</strong> LÃ  nhá»¯ng káº¿t quáº£ hoáº·c tÃ¡c dá»¥ng phá»¥ (side effect) mÃ  client mong Ä‘á»£i khi tÆ°Æ¡ng tÃ¡c vá»›i Ä‘á»‘i tÆ°á»£ng. ÄÃ¢y lÃ  "cÃ¡i gÃ¬" (what) mÃ  code cá»§a báº¡n lÃ m.</li>
                            <li><strong>Chi tiáº¿t cÃ i Ä‘áº·t (Implementation Details):</strong> LÃ  cÃ¡c bÆ°á»›c, thuáº­t toÃ¡n, hoáº·c cáº¥u trÃºc dá»¯ liá»‡u ná»™i bá»™ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº¡o ra hÃ nh vi Ä‘Ã³. ÄÃ¢y lÃ  "lÃ m tháº¿ nÃ o" (how) mÃ  code cá»§a báº¡n thá»±c hiá»‡n cÃ´ng viá»‡c.</li>
                        </ul>
                    </li>
                </ol>
                <h3>Má»‘i quan há»‡</h3>
                <p>Má»™t API Ä‘Æ°á»£c thiáº¿t káº¿ tá»‘t (well-designed) lÃ  khi <strong>Public API vÃ  Observable Behavior lÃ  má»™t</strong>. Táº¥t cáº£ cÃ¡c chi tiáº¿t cÃ i Ä‘áº·t pháº£i Ä‘Æ°á»£c che giáº¥u (encapsulated) vÃ  lÃ  <code>private</code>.</p>
                <img src="images/api_design.png" alt="Well-designed API vs. Leaking API">
                <p><em>Báº¡n cÃ³ thá»ƒ táº¡o sÆ¡ Ä‘á»“ nÃ y báº±ng mÃ£ nguá»“n <code>plantuml_sources/api_design.puml</code>.</em></p>
                <p>Khi má»™t chi tiáº¿t cÃ i Ä‘áº·t bá»‹ "rÃ² rá»‰" (leak) ra Public API, nÃ³ sáº½ cÃ¡m dá»— báº¡n viáº¿t nhá»¯ng bÃ i test kiá»ƒm tra vÃ o Ä‘Ã³, vÃ  Ä‘Ã³ lÃ  nguá»“n gá»‘c cá»§a cÃ¡c bÃ i test mong manh.</p>

                <h2>VÃ­ dá»¥: RÃ² rá»‰ Logic</h2>
                <p>HÃ£y xem xÃ©t má»™t class <code>User</code> cáº§n Ä‘áº£m báº£o tÃªn ngÆ°á»i dÃ¹ng khÃ´ng dÃ i quÃ¡ 50 kÃ½ tá»±.</p>
                <h3>ğŸ”´ CÃ¡ch lÃ m sai (RÃ² rá»‰)</h3>
                <p>Logic chuáº©n hÃ³a tÃªn (<code>normalize_name</code>) bá»‹ Ä‘á»ƒ á»Ÿ dáº¡ng <code>public</code>.</p>
<pre><code class="language-python"># BAD CODE: Logic chuáº©n hÃ³a bá»‹ rÃ² rá»‰
class User:
    def __init__(self, name=""):
        self.name = name

    # ÄÃ¢y lÃ  chi tiáº¿t cÃ i Ä‘áº·t, nhÆ°ng láº¡i lÃ  public!
    def normalize_name(self, name):
        # ... logic cáº¯t chuá»—i ...

class UserController:
    def rename_user(self, user, new_name):
        # Client pháº£i biáº¿t quÃ¡ nhiá»u vá» "lÃ m tháº¿ nÃ o"
        normalized = user.normalize_name(new_name)
        user.name = normalized
</code></pre>
                <p><strong>Váº¥n Ä‘á»:</strong> Client pháº£i gá»i 2 phÆ°Æ¡ng thá»©c Ä‘á»ƒ hoÃ n thÃ nh má»™t má»¥c tiÃªu. Náº¿u má»™t client khÃ¡c quÃªn gá»i <code>normalize_name</code>, há»‡ thá»‘ng sáº½ cÃ³ dá»¯ liá»‡u khÃ´ng nháº¥t quÃ¡n.</p>

                <h3>ğŸŸ¢ CÃ¡ch lÃ m Ä‘Ãºng (ÄÃ³ng gÃ³i)</h3>
                <p>Logic chuáº©n hÃ³a Ä‘Æ°á»£c giáº¥u vÃ o bÃªn trong vÃ  trá»Ÿ thÃ nh <code>private</code>.</p>
<pre><code class="language-python"># GOOD CODE: ÄÃ³ng gÃ³i hoÃ n toÃ n
class User:
    def __init__(self, name=""):
        self.name = name # Setter sáº½ tá»± Ä‘á»™ng gá»i logic chuáº©n hÃ³a

    @property
    def name(self):
        return self._name

    @name.setter
    def name(self, value):
        self._name = self._normalize_name(value)

    # Chi tiáº¿t cÃ i Ä‘áº·t thá»±c sá»±
    def _normalize_name(self, name):
        # ... logic cáº¯t chuá»—i ...

class UserController:
    def rename_user(self, user, new_name):
        # Client chá»‰ cáº§n biáº¿t "cÃ¡i gÃ¬", khÃ´ng cáº§n biáº¿t "lÃ m tháº¿ nÃ o"
        user.name = new_name
</code></pre>
                <p><strong>Lá»£i Ã­ch:</strong> BÃ¢y giá» báº¡n cÃ³ thá»ƒ thay Ä‘á»•i hoÃ n toÃ n logic <code>_normalize_name</code> mÃ  khÃ´ng lÃ m há»ng <code>UserController</code> hoáº·c cÃ¡c bÃ i test cá»§a nÃ³.</p>

                <h2>NguyÃªn lÃ½ Tell, Don't Ask</h2>
                <p>NguyÃªn lÃ½ nÃ y lÃ  kim chá»‰ nam giÃºp báº¡n thiáº¿t káº¿ API tá»‘t:</p>
                <ul>
                    <li><strong>Ask (Há»i - Xáº¥u):</strong> Há»i má»™t Ä‘á»‘i tÆ°á»£ng vá» tráº¡ng thÃ¡i cá»§a nÃ³, thá»±c hiá»‡n logic á»Ÿ bÃªn ngoÃ i, rá»“i cáº­p nháº­t láº¡i tráº¡ng thÃ¡i cho Ä‘á»‘i tÆ°á»£ng Ä‘Ã³. (ÄÃ¢y lÃ  vÃ­ dá»¥ sai á»Ÿ trÃªn).</li>
                    <li><strong>Tell (Báº£o - Tá»‘t):</strong> Ra lá»‡nh cho má»™t Ä‘á»‘i tÆ°á»£ng thá»±c hiá»‡n má»™t hÃ nh Ä‘á»™ng. Äá»‘i tÆ°á»£ng sáº½ tá»± sá»­ dá»¥ng tráº¡ng thÃ¡i ná»™i bá»™ cá»§a nÃ³ Ä‘á»ƒ thá»±c hiá»‡n hÃ nh Ä‘á»™ng Ä‘Ã³. (ÄÃ¢y lÃ  vÃ­ dá»¥ Ä‘Ãºng á»Ÿ trÃªn).</li>
                </ul>
                <p>Báº±ng cÃ¡ch tuÃ¢n thá»§ "Tell, Don't Ask", báº¡n sáº½ tá»± Ä‘á»™ng táº¡o ra cÃ¡c API Ä‘Ã³ng gÃ³i tá»‘t, che giáº¥u cÃ¡c chi tiáº¿t cÃ i Ä‘áº·t vÃ  giÃºp cho cÃ¡c bÃ i test cá»§a báº¡n trá»Ÿ nÃªn bá»n vá»¯ng hÆ¡n.</p>
            </section>

            <section id="test-doubles" class="content-section">
                <h1>Mocks, Stubs vÃ  Test Doubles</h1>
                <p>Khi viáº¿t unit test, chÃºng ta cáº§n "cÃ¡ch ly" Ä‘Æ¡n vá»‹ Ä‘ang Ä‘Æ°á»£c test (SUT - System Under Test) khá»i cÃ¡c dependency (Ä‘á»‘i tÆ°á»£ng phá»¥ thuá»™c) cá»§a nÃ³. <strong>Test Doubles</strong> lÃ  thuáº­t ngá»¯ chung chá»‰ cÃ¡c Ä‘á»‘i tÆ°á»£ng giáº£ Ä‘Æ°á»£c táº¡o ra Ä‘á»ƒ thay tháº¿ cÃ¡c dependency tháº­t trong mÃ´i trÆ°á»ng test.</p>
                <p>Máº·c dÃ¹ chÃºng ta hay gá»i chung lÃ  "mock", nhÆ°ng cÃ³ nhiá»u loáº¡i Test Double khÃ¡c nhau, má»—i loáº¡i cÃ³ má»™t má»¥c Ä‘Ã­ch riÃªng. PhÃ¢n biá»‡t rÃµ chÃºng lÃ  chÃ¬a khÃ³a Ä‘á»ƒ viáº¿t cÃ¡c bÃ i test Ä‘Ãºng Ä‘áº¯n.</p>

                <h2>Stub (Giáº£ láº­p dá»¯ liá»‡u)</h2>
                <ul>
                    <li><strong>Má»¥c Ä‘Ã­ch:</strong> Cung cáº¥p dá»¯ liá»‡u Ä‘áº§u vÃ o (input) cho SUT Ä‘á»ƒ nÃ³ cÃ³ thá»ƒ cháº¡y. Stub giÃºp mÃ´ phá»ng cÃ¡c tráº¡ng thÃ¡i vÃ  giÃ¡ trá»‹ khÃ¡c nhau.</li>
                    <li><strong>Vai trÃ²:</strong> ÄÃ³ng vai trÃ² "ngÆ°á»i cung cáº¥p thÃ´ng tin". SUT sáº½ <strong>láº¥y dá»¯ liá»‡u tá»«</strong> Stub.</li>
                    <li><strong>Quy táº¯c vÃ ng:</strong> <strong>Äá»«ng bao giá» xÃ¡c minh (verify) má»™t lá»i gá»i Ä‘áº¿n Stub.</strong> Viá»‡c SUT gá»i Stub má»™t hay nhiá»u láº§n khÃ´ng quan trá»ng, miá»…n lÃ  káº¿t quáº£ cuá»‘i cÃ¹ng Ä‘Ãºng. Viá»‡c verify Stub sáº½ khiáº¿n test bá»‹ gáº¯n cháº·t vÃ o chi tiáº¿t cÃ i Ä‘áº·t.</li>
                </ul>
<pre><code class="language-python">from unittest.mock import Mock

# database_stub lÃ  má»™t Stub vÃ¬ nÃ³ cung cáº¥p dá»¯ liá»‡u cho SUT
database_stub = Mock()
database_stub.get_user.return_value = {"name": "Alice", "email": "alice@example.com"}

# SUT sáº½ sá»­ dá»¥ng dá»¯ liá»‡u nÃ y Ä‘á»ƒ thá»±c hiá»‡n logic
user_service = UserService(database_stub)
</code></pre>

                <h2>Mock (Giáº£ láº­p hÃ nh Ä‘á»™ng)</h2>
                <ul>
                    <li><strong>Má»¥c Ä‘Ã­ch:</strong> Giáº£ láº­p vÃ  xÃ¡c minh cÃ¡c tÆ°Æ¡ng tÃ¡c Ä‘i ra (outcoming interaction) tá»« SUT Ä‘áº¿n cÃ¡c há»‡ thá»‘ng bÃªn ngoÃ i.</li>
                    <li><strong>Vai trÃ²:</strong> ÄÃ³ng vai trÃ² "ngÆ°á»i nháº­n lá»‡nh". SUT sáº½ <strong>gá»­i lá»‡nh Ä‘áº¿n</strong> Mock.</li>
                    <li><strong>CÃ¡ch dÃ¹ng:</strong> Sau khi hÃ nh Ä‘á»™ng (Act) diá»…n ra, báº¡n sáº½ xÃ¡c minh (verify) xem SUT Ä‘Ã£ gá»i Ä‘Ãºng phÆ°Æ¡ng thá»©c cá»§a Mock vá»›i Ä‘Ãºng tham sá»‘ hay chÆ°a.</li>
                </ul>
<pre><code class="language-python">from unittest.mock import Mock

# email_sender_mock lÃ  má»™t Mock vÃ¬ nÃ³ nháº­n lá»‡nh tá»« SUT
email_sender_mock = Mock()

user_service = UserService(email_sender_mock)
user_service.register("alice@example.com")

# XÃ¡c minh ráº±ng SUT Ä‘Ã£ gá»­i lá»‡nh Ä‘i Ä‘Ãºng cÃ¡ch
email_sender_mock.send_welcome_email.assert_called_with("alice@example.com")
</code></pre>

                <h2>PhÃ¢n biá»‡t qua NguyÃªn lÃ½ CQS (Command-Query Separation)</h2>
                <p>Má»™t cÃ¡ch tuyá»‡t vá»i Ä‘á»ƒ phÃ¢n biá»‡t khi nÃ o dÃ¹ng Stub vÃ  khi nÃ o dÃ¹ng Mock lÃ  dá»±a vÃ o nguyÃªn lÃ½ CQS:</p>
                <ul>
                    <li><strong>Query (Truy váº¥n):</strong> Má»™t phÆ°Æ¡ng thá»©c tráº£ vá» giÃ¡ trá»‹ nhÆ°ng khÃ´ng lÃ m thay Ä‘á»•i tráº¡ng thÃ¡i há»‡ thá»‘ng.
                        <ul><li>CÃ¡c dependency dáº¡ng Query nÃªn Ä‘Æ°á»£c thay tháº¿ báº±ng <strong>Stub</strong>.</li></ul>
                    </li>
                    <li><strong>Command (Lá»‡nh):</strong> Má»™t phÆ°Æ¡ng thá»©c lÃ m thay Ä‘á»•i tráº¡ng thÃ¡i há»‡ thá»‘ng (side effect) nhÆ°ng khÃ´ng tráº£ vá» giÃ¡ trá»‹ (void).
                        <ul><li>CÃ¡c dependency dáº¡ng Command nÃªn Ä‘Æ°á»£c thay tháº¿ báº±ng <strong>Mock</strong>.</li></ul>
                    </li>
                </ul>

                <h2>CÃ¡c loáº¡i Test Double khÃ¡c</h2>
                <ul>
                    <li><strong>Dummy:</strong> Má»™t Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c truyá»n vÃ o chá»‰ Ä‘á»ƒ láº¥p Ä‘áº§y danh sÃ¡ch tham sá»‘, nhÆ°ng khÃ´ng bao giá» Ä‘Æ°á»£c sá»­ dá»¥ng thá»±c sá»±.</li>
                    <li><strong>Fake:</strong> Má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ má»™t phiÃªn báº£n cÃ i Ä‘áº·t hoáº¡t Ä‘á»™ng thá»±c sá»±, nhÆ°ng Ä‘Æ¡n giáº£n hÆ¡n nhiá»u so vá»›i báº£n production (vÃ­ dá»¥: in-memory database thay vÃ¬ má»™t database tháº­t).</li>
                    <li><strong>Spy:</strong> Má»™t Ä‘á»‘i tÆ°á»£ng vá»«a Ä‘Ã³ng vai trÃ² lÃ  Stub (cung cáº¥p dá»¯ liá»‡u), vá»«a ghi láº¡i thÃ´ng tin vá» cÃ¡c lá»i gá»i Ä‘áº¿n nÃ³ (giá»‘ng Mock). Spy thÆ°á»ng Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ bao bá»c má»™t Ä‘á»‘i tÆ°á»£ng tháº­t.</li>
                </ul>
                <blockquote>
                    <p><strong>LÆ°u Ã½:</strong> CÃ¡c thÆ° viá»‡n nhÆ° <code>unittest.mock</code> cá»§a Python hay <code>Moq</code> cá»§a C# thÆ°á»ng cung cáº¥p má»™t class <code>Mock</code> Ä‘a nÄƒng. Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng class nÃ y Ä‘á»ƒ táº¡o ra cáº£ Stub, Mock, vÃ  Spy. Äiá»u quan trá»ng lÃ  <strong>cÃ¡ch báº¡n sá»­ dá»¥ng</strong> Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ trong bÃ i test sáº½ quyáº¿t Ä‘á»‹nh vai trÃ² thá»±c sá»± cá»§a nÃ³.</p>
                </blockquote>
            </section>

            <section id="architecture-mocking" class="content-section">
                <h1>Kiáº¿n trÃºc vÃ  Quy táº¯c Mocking</h1>
                <p>Viá»‡c quyáº¿t Ä‘á»‹nh "nÃªn mock cÃ¡i gÃ¬" vÃ  "khÃ´ng nÃªn mock cÃ¡i gÃ¬" lÃ  má»™t trong nhá»¯ng quyáº¿t Ä‘á»‹nh khÃ³ khÄƒn nháº¥t khi viáº¿t test. Má»™t quy táº¯c sai láº§m cÃ³ thá»ƒ dáº«n Ä‘áº¿n má»™t bá»™ test mong manh, khÃ³ báº£o trÃ¬. CÃ¢u tráº£ lá»i náº±m á»Ÿ viá»‡c hiá»ƒu rÃµ kiáº¿n trÃºc á»©ng dá»¥ng cá»§a báº¡n.</p>

                <h2>Kiáº¿n trÃºc Lá»¥c giÃ¡c (Hexagonal Architecture)</h2>
                <p>Kiáº¿n trÃºc nÃ y chia á»©ng dá»¥ng cá»§a báº¡n thÃ nh hai pháº§n chÃ­nh:</p>
                <ol>
                    <li><strong>LÃµi á»©ng dá»¥ng (Domain Layer & Application Services Layer):</strong> ÄÃ¢y lÃ  nÆ¡i chá»©a toÃ n bá»™ logic nghiá»‡p vá»¥ cá»§a báº¡n. LÃµi nÃ y hoÃ n toÃ n khÃ´ng biáº¿t gÃ¬ vá» tháº¿ giá»›i bÃªn ngoÃ i (nhÆ° database, API, UI).</li>
                    <li><strong>CÃ¡c Adapter:</strong> LÃ  cÃ¡c cá»•ng giao tiáº¿p giÃºp lÃµi á»©ng dá»¥ng nÃ³i chuyá»‡n vá»›i tháº¿ giá»›i bÃªn ngoÃ i. VÃ­ dá»¥: má»™t API controller lÃ  má»™t adapter nháº­n request tá»« HTTP, má»™t repository lÃ  má»™t adapter nÃ³i chuyá»‡n vá»›i database.</li>
                </ol>
                <p>Má»¥c tiÃªu cá»§a kiáº¿n trÃºc nÃ y lÃ  <strong>báº£o vá»‡ lÃµi nghiá»‡p vá»¥ khá»i nhá»¯ng thay Ä‘á»•i cá»§a cÃ´ng nghá»‡ bÃªn ngoÃ i</strong>.</p>

                <h2>PhÃ¢n biá»‡t hai loáº¡i Giao tiáº¿p</h2>
                <p>ÄÃ¢y lÃ  chÃ¬a khÃ³a Ä‘á»ƒ Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh mocking Ä‘Ãºng Ä‘áº¯n:</p>
                <ol>
                    <li><strong>Giao tiáº¿p ná»™i bá»™ (Intra-system communications):</strong>
                        <ul>
                            <li><strong>LÃ  gÃ¬:</strong> Sá»± tÆ°Æ¡ng tÃ¡c giá»¯a cÃ¡c class <strong>bÃªn trong</strong> lÃµi á»©ng dá»¥ng cá»§a báº¡n (vÃ­ dá»¥: <code>Customer</code> gá»i <code>Store</code>).</li>
                            <li><strong>Báº£n cháº¥t:</strong> ÄÃ¢y lÃ  <strong>chi tiáº¿t cÃ i Ä‘áº·t (Implementation Details)</strong>.</li>
                            <li><strong>Quy táº¯c:</strong> <strong>KHÃ”NG ÄÆ¯á»¢C MOCK.</strong> Viá»‡c mock cÃ¡c giao tiáº¿p ná»™i bá»™ sáº½ khiáº¿n test cá»§a báº¡n bá»‹ gáº¯n cháº·t vÃ o thiáº¿t káº¿ hiá»‡n táº¡i vÃ  sáº½ bá»‹ há»ng khi báº¡n refactor.</li>
                        </ul>
                    </li>
                    <li><strong>Giao tiáº¿p liÃªn há»‡ thá»‘ng (Inter-system communications):</strong>
                        <ul>
                            <li><strong>LÃ  gÃ¬:</strong> Sá»± tÆ°Æ¡ng tÃ¡c tá»« lÃµi á»©ng dá»¥ng cá»§a báº¡n Ä‘i ra má»™t <strong>há»‡ thá»‘ng bÃªn ngoÃ i</strong> mÃ  báº¡n khÃ´ng kiá»ƒm soÃ¡t (vÃ­ dá»¥: gá»­i email qua SMTP server, gá»i API thanh toÃ¡n cá»§a bÃªn thá»© ba).</li>
                            <li><strong>Báº£n cháº¥t:</strong> ÄÃ¢y lÃ  <strong>hÃ nh vi quan sÃ¡t Ä‘Æ°á»£c (Observable Behavior)</strong>.</li>
                            <li><strong>Quy táº¯c:</strong> <strong>NÃŠN DÃ™NG MOCK.</strong> Mocking á»Ÿ Ä‘Ã¢y giÃºp báº¡n xÃ¡c minh ráº±ng á»©ng dá»¥ng cá»§a báº¡n Ä‘Ã£ tuÃ¢n thá»§ Ä‘Ãºng "há»£p Ä‘á»“ng" (contract) khi giao tiáº¿p vá»›i tháº¿ giá»›i bÃªn ngoÃ i.</li>
                        </ul>
                    </li>
                </ol>

                <h3>SÆ¡ Ä‘á»“ Quy táº¯c Mocking</h3>
                <img src="images/hexagonal_mocking.png" alt="Hexagonal Architecture Mocking Rule">
                <p><em>Báº¡n cÃ³ thá»ƒ táº¡o sÆ¡ Ä‘á»“ nÃ y báº±ng mÃ£ nguá»“n <code>plantuml_sources/hexagonal_mocking.puml</code>.</em></p>

                <h2>CÃº lá»«a vá» Database</h2>
                <p>Má»™t sai láº§m phá»• biáº¿n lÃ  coi <strong>database cá»§a chÃ­nh á»©ng dá»¥ng</strong> lÃ  má»™t há»‡ thá»‘ng bÃªn ngoÃ i vÃ  luÃ´n luÃ´n mock nÃ³.</p>
                <ul>
                    <li><strong>Database cá»§a á»©ng dá»¥ng:</strong> LÃ  database mÃ  chá»‰ cÃ³ á»©ng dá»¥ng cá»§a báº¡n sá»­ dá»¥ng vÃ  báº¡n cÃ³ toÃ n quyá»n kiá»ƒm soÃ¡t (Ä‘á»•i schema, xÃ³a báº£ng...). NÃ³ nÃªn Ä‘Æ°á»£c coi lÃ  má»™t <strong>chi tiáº¿t cÃ i Ä‘áº·t</strong> cá»§a á»©ng dá»¥ng. Viá»‡c mock nÃ³ sáº½ lÃ m giáº£m giÃ¡ trá»‹ cá»§a bÃ i test.</li>
                    <li><strong>Há»‡ thá»‘ng bÃªn ngoÃ i:</strong> LÃ  nhá»¯ng há»‡ thá»‘ng báº¡n khÃ´ng kiá»ƒm soÃ¡t, nhÆ° má»™t API cá»§a Ä‘á»‘i tÃ¡c.</li>
                </ul>
                <blockquote>
                    <p><strong>Lá»i khuyÃªn:</strong> Thay vÃ¬ mock database, hÃ£y viáº¿t cÃ¡c bÃ i <strong>Integration Test</strong> cháº¡y trÃªn má»™t database tháº­t (hoáº·c má»™t phiÃªn báº£n trong Docker). Äiá»u nÃ y sáº½ mang láº¡i sá»± tá»± tin cao hÆ¡n nhiá»u. CÃ¡c bÃ i <strong>Unit Test</strong> nÃªn táº­p trung vÃ o cÃ¡c logic nghiá»‡p vá»¥ thuáº§n tÃºy khÃ´ng phá»¥ thuá»™c vÃ o I/O.</p>
                </blockquote>
            </section>
        </main>
    </div>

    <script src="js/main.js"></script>
    <script>
        feather.replace();
    </script>
</body>
</html>
