<svg width="850" height="500" viewBox="0 0 850 500" xmlns="http://www.w.w.org/2000/svg">
    <defs>
        <style>
            .container { font-family: 'Inter', sans-serif; }
            .title { font-size: 20px; font-weight: bold; fill: #E0E0E0; text-anchor: middle; }
            .subtitle { font-size: 16px; font-weight: 500; fill: #C0C0C0; text-anchor: middle; }
            .label { font-size: 14px; fill: #FFFFFF; text-anchor: middle; }
            .small-label { font-size: 12px; fill: #E0E0E0; text-anchor: middle; }
            .mono-label { font-family: 'Courier New', Courier, monospace; font-size: 13px; fill: #F1C40F; }

            .cpu-core { fill: #2C3E50; stroke: #4A90E2; stroke-width: 2; rx: 8; }
            .thread-block { fill: #8E44AD; stroke: #9B59B6; stroke-width: 1; rx: 5; }
            .gil-lock { fill: #C0392B; stroke: #E74C3C; stroke-width: 2; rx: 10; }
            .gil-key { fill: #F1C40F; }
            .io-wait { fill: #34495E; stroke: #7F8C8D; stroke-width: 1.5; stroke-dasharray: 3 3; rx: 5; }

            .arrow { stroke: #BDC3C7; stroke-width: 2; marker-end: url(#arrowhead); }
            .arrow-text { font-size: 12px; fill: #BDC3C7; text-anchor: middle; }
        </style>
        <marker id="arrowhead" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
            <path d="M 0 0 L 10 5 L 0 10 z" fill="#BDC3C7" />
        </marker>
    </defs>

    <rect width="100%" height="100%" fill="#212529"/>

    <text x="425" y="30" class="title">Python Global Interpreter Lock (GIL)</text>

    <!-- CPU Cores -->
    <g id="cpu-cores" transform="translate(50, 80)">
        <rect width="350" height="80" class="cpu-core"/>
        <text x="175" y="45" class="label" font-size="18px">CPU Core 1</text>
    </g>
    <g transform="translate(450, 80)">
        <rect width="350" height="80" class="cpu-core"/>
        <text x="175" y="45" class="label" font-size="18px">CPU Core 2</text>
    </g>

    <!-- GIL Lock -->
    <g id="gil" transform="translate(375, 200)">
        <rect width="100" height="50" class="gil-lock"/>
        <text x="50" y="30" class="label">GIL</text>
        <circle cx="50" cy="30" r="15" fill="none" stroke="#FFFFFF" stroke-width="1"/>
    </g>

    <!-- Threads -->
    <g id="threads" transform="translate(150, 300)">
        <!-- Thread 1 -->
        <g id="thread-1">
            <rect width="120" height="50" class="thread-block"/>
            <text x="60" y="30" class="label">Thread 1</text>
            <text x="60" y="70" class="small-label">(CPU-Bound)</text>
        </g>

        <!-- Thread 2 -->
        <g id="thread-2" transform="translate(150, 0)">
            <rect width="120" height="50" class="thread-block"/>
            <text x="60" y="30" class="label">Thread 2</text>
            <text x="60" y="70" class="small-label">(CPU-Bound)</text>
        </g>

        <!-- Thread 3 -->
        <g id="thread-3" transform="translate(300, 0)">
            <rect width="120" height="50" class="thread-block"/>
            <text x="60" y="30" class="label">Thread 3</text>
            <text x="60" y="70" class="small-label">(I/O-Bound)</text>
        </g>
    </g>

    <!-- Explanation Flow -->
    <g id="flow">
        <!-- Thread 1 wants the GIL -->
        <path d="M 210 290 Q 250 250 370 240" class="arrow" stroke-dasharray="5 5" fill="none"/>
        <text x="290" y="255" class="arrow-text">1. Wants to run</text>

        <!-- Thread 1 gets the GIL -->
        <g transform="translate(390, 240)">
            <path d="M 0 0 Q 60 -40 10 -90" class="arrow" fill="none" />
            <text x="5" y="-50" class="arrow-text" transform="rotate(-20)">2. Acquires GIL</text>
        </g>

        <!-- Thread 1 runs on Core 1 -->
        <path d="M 225 170 v 120" class="arrow" visibility="hidden"/>
        <g transform="translate(225, 170)">
            <path d="M 0 0 v 120" class="arrow" stroke="#2ECC71" stroke-width="3"/>
        </g>
        <text x="265" y="240" class="arrow-text" fill="#2ECC71">3. Runs on Core 1</text>

        <!-- Thread 2 wants the GIL but is blocked -->
        <path d="M 360 290 Q 380 260 400 255" class="arrow" stroke-dasharray="5 5" fill="none" stroke="#E74C3C"/>
        <text x="395" y="280" class="arrow-text" fill="#E74C3C">4. Blocked!</text>
        <text x="570" y="125" class="label" fill="#E74C3C" text-anchor="middle">Core 2 is IDLE</text>
        <text x="570" y="145" class="small-label" fill="#E74C3C" text-anchor="middle">(for Python code)</text>

        <!-- Thread 3 performs I/O -->
        <g transform="translate(570, 300)">
            <rect width="120" height="100" class="io-wait"/>
            <text x="60" y="30" class="label">Thread 3</text>
            <text x="60" y="50" class="small-label">Waiting for</text>
            <text x="60" y="65" class="small-label">Network/Disk</text>
            <text x="60" y="85" class="mono-label">[GIL Released]</text>
        </g>
        <path d="M 510 325 h 50" class="arrow"/>
        <text x="515" y="315" class="arrow-text">5. Releases GIL</text>
    </g>

</svg>
